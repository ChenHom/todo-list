import{r as h,o as y,c as x,a as U,d as D,w as O,b as r,i as v,u as l,t as b,e as w,f as k,g,v as K,T as M,h as V,n as $,j as q,k as A,F as C,l as F,m as E,p as z,q as B,s as j,x as H,y as Q,z as T,A as I,B as J,C as P,D as G}from"./vendor.ab6fcf4f.js";(function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))d(n);new MutationObserver(n=>{for(const t of n)if(t.type==="childList")for(const o of t.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&d(o)}).observe(document,{childList:!0,subtree:!0});function p(n){const t={};return n.integrity&&(t.integrity=n.integrity),n.referrerpolicy&&(t.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?t.credentials="include":n.crossorigin==="anonymous"?t.credentials="omit":t.credentials="same-origin",t}function d(n){if(n.ep)return;n.ep=!0;const t=p(n);fetch(n.href,t)}})();function N(e,a){if(!localStorage)throw new Error("need the localStorage!");const p="task_todos";if(e==="serialize")localStorage.setItem(p,JSON.stringify(a));else return JSON.parse(localStorage.getItem(p))}function S(e,a){return e<a?-1:e>a?1:0}function Y(e,a){return e===a}function Z(e=""){return e?new Date(e).toLocaleDateString("zh-Tw",{hour12:!1}):new Date().toLocaleDateString("zh-Tw",{hour12:!1})}function W(){return new Date().toLocaleTimeString("zh-Tw",{hour12:!1})}function X(e,a){return Y(new Date(e).getTime(),new Date(a).getTime())}var _=(e=>(e.QUICK="\u6025",e.NORMAL="\u7DE9",e))(_||{});const ee=()=>{const e=h([]),a=(s,i)=>({index:Date.now(),content:s,completed:!1,priority:i,time:W()}),p=(s,i=_.NORMAL)=>{const u=Z(),c=a(s,i),m=t(u);m?m.todos.push(c):e.value.push({date:u,todos:[c]})},d=()=>{e.value=e.value.filter(s=>s.todos=s.todos.filter(i=>i.completed===!1)),e.value=e.value.filter(s=>s.todos.length)},n=(s,i,u=!0)=>{let c=o(t(s),i);c!==void 0&&(c.completed=u)},t=s=>e.value.find(i=>X(i.date,s)),o=(s,i)=>{if(s!==void 0)return s.todos.find(u=>i===u.index)};return{tasks:e,createTodo:a,addTodo:p,todoClearCompleted:d,todoCompleted:n,findTask:t,findTodo:o}},L=(e,a)=>{const p=e.__vccOpts||e;for(const[d,n]of a)p[d]=n;return p},te={},oe={class:"text-xs inline-block py-1 px-2.5 leading-none whitespace-nowrap align-baseline font-bold rounded-lg"};function se(e,a){return y(),x("span",oe,[U(e.$slots,"default")])}const re=L(te,[["render",se]]),ne={class:"shadow-md mt-2 hover:shadow-inner","data-testid":"card"},de={class:"pt-2 pb-5 bg-white space-y-3 border border-1 border-gray-100 hover:border-gray-200"},ae={class:"flex items-start mt-2"},ie={class:"max-h-10 w-36 text-left"},le=["textContent"],ue=["textContent"],ce={class:"w-full flex justify-end pr-2"},pe={class:"flex items-start"},fe={class:"max-h-10 my-auto w-16"},me=["id"],ve={class:"w-full"},ye=["for","textContent"],_e=D({__name:"Todo",props:{todo:null,date:null},emits:["sort"],setup(e){const{todo:a,date:p}=e;let d=h(a.completed),n=h(!1),t=a.priority===_.QUICK;const o=A("toCompleted"),s=A("sortTodo");return O(()=>d.value,i=>o(p,a.index,i)),(i,u)=>(y(),x("div",ne,[r("div",de,[r("div",ae,[r("div",ie,[r("span",{class:"ml-2 mr-1 text-gray-300 text-xs cursor-default",onMouseover:u[0]||(u[0]=c=>v(n)?n.value=!0:n=!0),onMouseleave:u[1]||(u[1]=c=>v(n)?n.value=!1:n=!1),onClick:u[2]||(u[2]=c=>l(s)("time")),textContent:b(e.todo.time)},null,40,le),w(M,{name:"slide"},{default:k(()=>[g(r("span",{class:"text-gray-300 text-xs",textContent:b(e.date)},null,8,ue),[[K,l(n)]])]),_:1})]),r("div",ce,[w(re,{class:$(["opacity-70 cursor-default",{"bg-red-200":l(t),"text-red-500":l(t),"bg-sky-200":!l(t),"text-sky-500":!l(t)}]),onClick:u[3]||(u[3]=c=>l(s)("priority"))},{default:k(()=>[V(b(e.todo.priority),1)]),_:1},8,["class"])])]),r("div",pe,[r("div",fe,[g(r("input",{id:`c_${e.todo.index}`,type:"checkbox","onUpdate:modelValue":u[4]||(u[4]=c=>v(d)?d.value=c:d=c),class:"focus:ring-indigo-500 h-4 w-4 text-indigo-600 border-gray-300 rounded"},null,8,me),[[q,l(d)]])]),r("div",ve,[r("p",{for:`c_${e.todo.index}`,class:$(["mx-3 text-slate-500 text-ellipsis overflow-hidden text-xl text-left",{"line-through":l(d)}]),onClick:u[5]||(u[5]=c=>v(d)?d.value=!l(d):d=!l(d)),textContent:b(e.todo.content)},null,10,ye)])])])]))}});const ge={class:""},he=["textContent"],xe=D({__name:"Tasks",props:{date:null,todos:null},setup(e){const{date:a,todos:p}=e;let d=h(!0);return B("sortTodo",(()=>{let t={priority:{direction:!0,sort:(o,s)=>S(o.priority,s.priority)},time:{direction:!0,sort:(o,s)=>S(o.time,s.time)}};return o=>{t[o].direction=!t[o].direction,t[o].direction?p.sort((s,i)=>t[o].sort(s,i)):p.sort((s,i)=>t[o].sort(i,s))}})()),(t,o)=>(y(),x(C,null,[r("div",ge,[r("div",{class:"flex justify-center cursor-pointer mt-8 p-2 bg-white border-b border-gray-300 text-gray-400 relative",onClick:o[0]||(o[0]=s=>v(d)?d.value=!l(d):d=!l(d))},[r("span",{textContent:b(e.date)},null,8,he),r("div",{role:"button",class:$(["-ml-2 border-2 border-gray-400 board bottom-3 right-2",{"board-grow":!l(d)}])},"...",2)])]),w(M,{name:"slide-fade"},{default:k(()=>[g(r("div",null,[w(F,{name:"list",tag:"ul"},{default:k(()=>[(y(!0),x(C,null,E(e.todos,s=>(y(),z(_e,{key:s.index,todo:{...s},date:e.date},null,8,["todo","date"]))),128))]),_:1})],512),[[K,l(d)]])]),_:1})],64))}});const be=L(xe,[["__scopeId","data-v-d792463d"]]),R=e=>(J("data-v-e39aaabd"),e=e(),P(),e),we={class:"shadow-md sm:overflow-hidden"},ke={class:"px-4 py-5 bg-white space-y-6 sm:p-6 border border-1 border-gray-100"},Ce={class:"grid grid-cols-3 gap-6"},Te={class:"col-span-3"},$e={class:"mt-1 flex rounded-md shadow-sm"},Se=["onKeypress"],De={class:"w-16 relative bg-red-200 flex"},Le=["onKeypress","value"],Ae=R(()=>r("div",{class:"priority-tile quick-priority"},[r("label",{for:"quick-priority",class:"priority-label text-red-500"},"\u6025\u4E8B")],-1)),Ie={class:"w-16 relative bg-sky-200 flex"},Ne=["onKeypress","value"],Oe=R(()=>r("div",{class:"priority-tile slow-priority"},[r("label",{for:"slow-priority",class:"priority-label text-sky-500"},"\u7DE9\u8FA6")],-1)),Ke=D({__name:"App",setup(e){const{tasks:a,addTodo:p,todoClearCompleted:d,todoCompleted:n}=ee();let t=h(""),o=h(_.NORMAL);B("toCompleted",n);const s=j(()=>a.value.sort((c,m)=>S(m.date,c.date)));O(()=>a.value,()=>{N("serialize",a.value)},{deep:!0}),H(()=>{const c=N("deserialize");c&&(a.value=c)});function i(){t.value&&p(t.value,o.value),u()}function u(){t.value="",o.value=_.NORMAL}return(c,m)=>(y(),x(C,null,[r("div",we,[r("div",ke,[r("div",Ce,[r("div",Te,[r("div",$e,[r("button",{type:"button",onClick:m[0]||(m[0]=(...f)=>l(d)&&l(d)(...f)),"data-testid":"clear",class:"mr-5 bg-blue-50 py-2 px-3 border border-gray-300 rounded-md shadow-md text-xs leading-4 font-medium text-gray-400 hover:bg-gray-50 hover:shadow-inner"},"\u6E05\u7A7A\u5DF2\u5B8C\u6210"),g(r("input",{type:"text",id:"todo",autofocus:"","onUpdate:modelValue":m[1]||(m[1]=f=>v(t)?t.value=f:t=f),onKeypress:T(i,["enter"]),"data-testid":"content",class:"focus:border-sky-300 rounded-l-md shadow-md flex-1 block w-full sm:text-sm border-gray-300 hover:shadow-inner placeholder-gray-300",placeholder:"do it..."},null,40,Se),[[Q,l(t)]]),r("div",De,[g(r("input",{type:"radio",class:"priority-button opacity-0","onUpdate:modelValue":m[2]||(m[2]=f=>v(o)?o.value=f:o=f),onKeypress:T(i,["enter"]),value:l(_).QUICK,name:"radio",id:"quick-priority"},null,40,Le),[[I,l(o)]]),Ae]),r("div",Ie,[g(r("input",{type:"radio",class:"priority-button",name:"radio","onUpdate:modelValue":m[3]||(m[3]=f=>v(o)?o.value=f:o=f),onKeypress:T(i,["enter"]),value:l(_).NORMAL,id:"slow-priority"},null,40,Ne),[[I,l(o)]]),Oe]),r("button",{type:"button",onClick:i,"data-testid":"add",class:"bg-blue-100 py-2 px-3 border border-l-0 border-blue-300 rounded-r-md shadow-md text-sm leading-4 font-semibold text-gray-500 hover:bg-blue-200 hover:shadow-inner"},"\u6DFB\u52A0")])])])])]),(y(!0),x(C,null,E(l(s),f=>(y(),z(be,{date:f.date,todos:f.todos,key:f.date},null,8,["date","todos"]))),128))],64))}});const Me=L(Ke,[["__scopeId","data-v-e39aaabd"]]);G(Me).mount("#app");
