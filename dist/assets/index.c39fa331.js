import{r as w,o as y,c as _,a as q,d as D,w as K,b as o,u as i,t as g,e as C,f as T,g as b,v as z,T as B,F as k,h as L,i as F,n as S,j as x,k as j,l as M,m as H,p as R,q as U,s as N,x as Q,y as J,z as $,A as O,B as P,C as G,D as Y,E as Z}from"./vendor.9d43ae11.js";(function(){const d=document.createElement("link").relList;if(d&&d.supports&&d.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))a(n);new MutationObserver(n=>{for(const t of n)if(t.type==="childList")for(const s of t.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&a(s)}).observe(document,{childList:!0,subtree:!0});function p(n){const t={};return n.integrity&&(t.integrity=n.integrity),n.referrerpolicy&&(t.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?t.credentials="include":n.crossorigin==="anonymous"?t.credentials="omit":t.credentials="same-origin",t}function a(n){if(n.ep)return;n.ep=!0;const t=p(n);fetch(n.href,t)}})();function E(e,d){if(!localStorage)throw new Error("need the localStorage!");const p="task_todos";if(e==="serialize")localStorage.setItem(p,JSON.stringify(d));else return JSON.parse(localStorage.getItem(p))}function A(e,d){return e<d?-1:e>d?1:0}function W(e,d){return e===d}function X(e=""){return e?new Date(e).toLocaleDateString("zh-Tw",{hour12:!1}):new Date().toLocaleDateString("zh-Tw",{hour12:!1})}function ee(){return new Date().toLocaleTimeString("zh-Tw",{hour12:!1})}function te(e,d){return W(new Date(e).getTime(),new Date(d).getTime())}var h=(e=>(e.QUICK="\u6025",e.NORMAL="\u7DE9",e))(h||{});const oe=()=>{const e=w([]),d=(r,u,l)=>({index:Date.now(),content:r,tags:u,completed:!1,priority:l,time:ee()}),p=(r,u,l=h.NORMAL)=>{const f=X(),v=d(r,u,l),c=t(f);c?c.todos.push(v):e.value.push({date:f,todos:[v]})},a=()=>{e.value=e.value.filter(r=>r.todos=r.todos.filter(u=>u.completed===!1)),e.value=e.value.filter(r=>r.todos.length)},n=(r,u,l=!0)=>{let f=s(t(r),u);f!==void 0&&(f.completed=l)},t=r=>e.value.find(u=>te(u.date,r)),s=(r,u)=>{if(r!==void 0)return r.todos.find(l=>u===l.index)};return{tasks:e,createTodo:d,addTodo:p,todoClearCompleted:a,todoCompleted:n,findTask:t,findTodo:s}},I=(e,d)=>{const p=e.__vccOpts||e;for(const[a,n]of d)p[a]=n;return p},se={},re={class:"text-xs inline-block py-1 px-2.5 leading-none whitespace-nowrap align-baseline font-bold rounded-lg"};function ne(e,d){return y(),_("span",re,[q(e.$slots,"default")])}const de=I(se,[["render",ne]]),ae={class:"flex flex-row"},le={class:"w-full mt-2 shadow-inner hover:shadow-md","data-testid":"card"},ie={class:"pt-2 pb-5 bg-white space-y-3 border border-1 border-gray-100 hover:border-gray-200"},ue={class:"flex items-start mt-2"},ce={class:"max-h-10 w-36 text-left"},pe=["textContent"],fe=["textContent"],me={class:"w-full flex justify-between pr-2"},ve={class:"text-xs"},ye=["textContent"],_e={class:"max-h-10 my-auto w-16"},he=["id"],xe={class:"w-full"},ge=["for","textContent"],be=o("div",null,"dd",-1),we=D({__name:"Todo",props:{todo:null,date:null},emits:["sort"],setup(e){const{todo:d,date:p}=e;let a=w(d.completed),n=w(!1),t=d.priority===h.QUICK;const s=M("toCompleted"),r=M("sortTodo");return K(()=>a.value,u=>s(p,d.index,u)),(u,l)=>(y(),_("div",ae,[o("div",le,[o("div",ie,[o("div",ue,[o("div",ce,[o("span",{class:"ml-2 mr-1 text-gray-300 text-xs cursor-default",onClick:l[0]||(l[0]=f=>i(r)("time")),textContent:g(e.todo.time)},null,8,pe),C(B,{name:"slide"},{default:T(()=>[b(o("span",{class:"text-gray-300 text-xs",textContent:g(e.date)},null,8,fe),[[z,i(n)]])]),_:1})]),o("div",me,[o("div",ve,[(y(!0),_(k,null,L(e.todo.tags,(f,v)=>(y(),_("span",{class:"mx-1 cursor-pointer text-cyan-800 border-b-2 hover:border-blue-500 transition duration-150 ease-out",key:v,textContent:g(f)},null,8,ye))),128))]),C(de,{class:S(["opacity-70 cursor-default",{"bg-red-200":i(t),"text-red-500":i(t),"bg-sky-200":!i(t),"text-sky-500":!i(t)}]),onClick:l[1]||(l[1]=f=>i(r)("priority"))},{default:T(()=>[F(g(e.todo.priority),1)]),_:1},8,["class"])])]),o("div",{class:"flex items-start",onMouseover:l[3]||(l[3]=f=>x(n)?n.value=!0:n=!0),onMouseleave:l[4]||(l[4]=f=>x(n)?n.value=!1:n=!1)},[o("div",_e,[b(o("input",{id:`c_${e.todo.index}`,type:"checkbox","onUpdate:modelValue":l[2]||(l[2]=f=>x(a)?a.value=f:a=f),class:"focus:ring-indigo-500 h-4 w-4 text-indigo-600 border-gray-300 rounded"},null,8,he),[[j,i(a)]])]),o("div",xe,[o("p",{for:`c_${e.todo.index}`,class:S(["mx-3 text-slate-500 text-ellipsis overflow-hidden text-xl text-left",{"line-through":i(a)}]),textContent:g(e.todo.content)},null,10,ge)])],32)])]),be]))}});const ke={class:""},Ce=["textContent"],Te=D({__name:"Tasks",props:{date:null,todos:null},setup(e){const{date:d,todos:p}=e;let a=w(!0);return U("sortTodo",(()=>{let t={priority:{direction:!0,sort:(s,r)=>A(s.priority,r.priority)},time:{direction:!0,sort:(s,r)=>A(s.time,r.time)}};return s=>{t[s].direction=!t[s].direction,t[s].direction?p.sort((r,u)=>t[s].sort(r,u)):p.sort((r,u)=>t[s].sort(u,r))}})()),(t,s)=>(y(),_(k,null,[o("div",ke,[o("div",{class:"flex justify-center cursor-pointer mt-8 p-2 bg-white border-b border-gray-300 text-gray-400 relative",onClick:s[0]||(s[0]=r=>x(a)?a.value=!i(a):a=!i(a))},[o("span",{textContent:g(e.date)},null,8,Ce),o("div",{role:"button",class:S(["-ml-2 border-2 border-gray-400 board bottom-3 right-2",{"board-grow":!i(a)}])},"...",2)])]),C(B,{name:"slide-fade"},{default:T(()=>[b(o("div",null,[C(H,{name:"list",tag:"ul"},{default:T(()=>[(y(!0),_(k,null,L(e.todos,r=>(y(),R(we,{key:r.index,todo:{...r},date:e.date},null,8,["todo","date"]))),128))]),_:1})],512),[[z,i(a)]])]),_:1})],64))}});const $e=I(Te,[["__scopeId","data-v-d792463d"]]),V=e=>(G("data-v-dbfcf760"),e=e(),Y(),e),Se={class:"shadow-md sm:overflow-hidden"},Ae={class:"px-4 py-2 bg-white space-y-6 sm:p-6 border border-1 border-gray-100"},De={class:"grid grid-cols-3 gap-6"},Le={class:"col-span-3"},Ie={class:"mt-1 flex rounded-md shadow-sm"},Me=["onKeypress","rows"],Ne={class:"w-16 relative bg-red-200 flex"},Oe=["onKeypress","value"],Ee=V(()=>o("div",{class:"priority-tile quick-priority"},[o("label",{for:"quick-priority",class:"priority-label text-red-500"},"\u6025\u4E8B")],-1)),Ke={class:"w-16 relative bg-sky-200 flex"},ze=["onKeypress","value"],Be=V(()=>o("div",{class:"priority-tile slow-priority"},[o("label",{for:"slow-priority",class:"priority-label text-sky-500"},"\u7DE9\u8FA6")],-1)),Re=D({__name:"App",setup(e){const{tasks:d,addTodo:p,todoClearCompleted:a,todoCompleted:n}=oe();let t=w(""),s=w(h.NORMAL);U("toCompleted",n);const r=N(()=>d.value.sort((v,c)=>A(c.date,v.date))),u=N(()=>t.value.split(`
`).length);K(()=>d.value,()=>{E("serialize",d.value)},{deep:!0}),Q(()=>{const v=E("deserialize");v&&(d.value=v)});function l(){if(t.value!==""){const v=[...t.value.matchAll(/#\S+/g)].map(c=>c[0]);v.forEach(c=>t.value=t.value.replace(c,"")),p(t.value,v,s.value)}f()}function f(){t.value="",s.value=h.NORMAL}return(v,c)=>(y(),_(k,null,[o("div",Se,[o("div",Ae,[o("div",De,[o("div",Le,[o("div",Ie,[o("button",{type:"button",onClick:c[0]||(c[0]=(...m)=>i(a)&&i(a)(...m)),"data-testid":"clear",class:"mr-5 bg-blue-50 py-2 px-3 border border-gray-300 rounded-md shadow-md text-xs leading-4 font-medium text-gray-400 hover:bg-gray-50 hover:shadow-inner"},"\u6E05\u7A7A\u5DF2\u5B8C\u6210"),b(o("textarea",{id:"todo",autofocus:"","onUpdate:modelValue":c[1]||(c[1]=m=>x(t)?t.value=m:t=m),onKeypress:$(P(l,["alt"]),["enter"]),"data-testid":"content",class:"focus:border-sky-300 rounded-l-md shadow-md flex-1 block w-full sm:text-sm border-gray-300 hover:shadow-inner placeholder-gray-300",placeholder:"do it...",cols:"30",rows:i(u)},null,40,Me),[[J,i(t),void 0,{trim:!0}]]),o("div",Ne,[b(o("input",{type:"radio",class:"priority-button opacity-0","onUpdate:modelValue":c[2]||(c[2]=m=>x(s)?s.value=m:s=m),onKeypress:$(l,["enter"]),value:i(h).QUICK,name:"radio",id:"quick-priority"},null,40,Oe),[[O,i(s)]]),Ee]),o("div",Ke,[b(o("input",{type:"radio",class:"priority-button",name:"radio","onUpdate:modelValue":c[3]||(c[3]=m=>x(s)?s.value=m:s=m),onKeypress:$(l,["enter"]),value:i(h).NORMAL,id:"slow-priority"},null,40,ze),[[O,i(s)]]),Be]),o("button",{type:"button",onClick:l,"data-testid":"add",class:"bg-blue-100 py-2 px-3 border border-l-0 border-blue-300 rounded-r-md shadow-md text-sm leading-4 font-semibold text-gray-500 hover:bg-blue-200 hover:shadow-inner"},"\u6DFB\u52A0")])])])])]),(y(!0),_(k,null,L(i(r),m=>(y(),R($e,{date:m.date,todos:m.todos,key:m.date},null,8,["date","todos"]))),128))],64))}});const Ue=I(Re,[["__scopeId","data-v-dbfcf760"]]);Z(Ue).mount("#app");
