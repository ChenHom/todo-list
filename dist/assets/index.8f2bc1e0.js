import{r as g,o as _,c as x,a as z,d as S,w as I,b as s,i as v,t as b,e as w,f as k,g as h,v as N,u as i,T as O,h as B,n as $,j as R,k as U,F as C,l as V,m as K,p as M,q,s as F,x as j,y as T,z as L,A as H,B as Q,C as J,D as P}from"./vendor.c7e9e7c8.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))a(o);new MutationObserver(o=>{for(const n of o)if(n.type==="childList")for(const l of n.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&a(l)}).observe(document,{childList:!0,subtree:!0});function u(o){const n={};return o.integrity&&(n.integrity=o.integrity),o.referrerpolicy&&(n.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?n.credentials="include":o.crossorigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function a(o){if(o.ep)return;o.ep=!0;const n=u(o);fetch(o.href,n)}})();function A(e,t){if(!localStorage)throw new Error("need the localStorage!");const u="task_todos";if(e==="serialize")localStorage.setItem(u,JSON.stringify(t));else return JSON.parse(localStorage.getItem(u))}function G(e,t){return e<t?-1:e>t?1:0}function Y(e,t){return e===t}function Z(e=""){return e?new Date(e).toLocaleDateString("zh-Tw",{hour12:!1}):new Date().toLocaleDateString("zh-Tw",{hour12:!1})}function W(){return new Date().toLocaleTimeString("zh-Tw",{hour12:!1})}function X(e,t){return Y(new Date(e).getTime(),new Date(t).getTime())}var y=(e=>(e.QUICK="\u6025",e.NORMAL="\u7DE9",e))(y||{});const ee=()=>{const e=g([]),t=(d,r)=>({index:Date.now(),content:d,completed:!1,priority:r,time:W()}),u=(d,r=y.NORMAL)=>{const c=Z(),m=t(d,r),f=n(c);f?f.todos.push(m):e.value.push({date:c,todos:[m]})},a=()=>{e.value=e.value.filter(d=>d.todos=d.todos.filter(r=>r.completed===!1)),e.value=e.value.filter(d=>d.todos.length)},o=(d,r,c=!0)=>{let m=l(n(d),r);m!==void 0&&(m.completed=c)},n=d=>e.value.find(r=>X(r.date,d)),l=(d,r)=>{if(d!==void 0)return d.todos.find(c=>r===c.index)};return{tasks:e,createTodo:t,addTodo:u,todoClearCompleted:a,todoCompleted:o,findTask:n,findTodo:l}},D=(e,t)=>{const u=e.__vccOpts||e;for(const[a,o]of t)u[a]=o;return u},te={},oe={class:"text-xs inline-block py-1 px-2.5 leading-none whitespace-nowrap align-baseline font-bold text-white rounded-lg"};function se(e,t){return _(),x("span",oe,[z(e.$slots,"default")])}const ne=D(te,[["render",se]]),re={class:"shadow-md mt-2 hover:shadow-inner","data-testid":"card"},ae={class:"pt-2 pb-5 bg-white space-y-3 border border-1 border-gray-100 hover:border-gray-200"},de={class:"flex items-start mt-2"},le={class:"max-h-10 w-36 text-left"},ie=["textContent"],ue=["textContent"],ce={class:"w-full flex justify-end pr-2"},pe={class:"flex items-start"},fe={class:"max-h-10 my-auto w-16"},me=["id"],ve={class:"w-full"},_e=["for","textContent"],ye=S({__name:"Todo",props:{todo:null,date:null},setup(e){const{todo:t,date:u}=e;let a=g(t.completed),o=g(!1);const n=U("toCompleted");I(()=>a.value,d=>n(u,t.index,d));function l(d){return d===y.QUICK}return(d,r)=>(_(),x("div",re,[s("div",ae,[s("div",de,[s("div",le,[s("span",{class:"ml-2 mr-1 text-gray-300 text-xs",onMouseover:r[0]||(r[0]=c=>v(o)?o.value=!0:o=!0),onMouseleave:r[1]||(r[1]=c=>v(o)?o.value=!1:o=!1),textContent:b(e.todo.time)},null,40,ie),w(O,{name:"slide"},{default:k(()=>[h(s("span",{class:"text-gray-300 text-xs",textContent:b(e.date)},null,8,ue),[[N,i(o)]])]),_:1})]),s("div",ce,[w(ne,{class:$(["opacity-70",{"bg-red-500":l(e.todo.priority),"bg-sky-500":!l(e.todo.priority)}])},{default:k(()=>[B(b(e.todo.priority),1)]),_:1},8,["class"])])]),s("div",pe,[s("div",fe,[h(s("input",{id:`c_${e.todo.index}`,type:"checkbox","onUpdate:modelValue":r[2]||(r[2]=c=>v(a)?a.value=c:a=c),class:"focus:ring-indigo-500 h-4 w-4 text-indigo-600 border-gray-300 rounded"},null,8,me),[[R,i(a)]])]),s("div",ve,[s("p",{for:`c_${e.todo.index}`,class:$(["mx-3 text-slate-500 text-ellipsis overflow-hidden text-xl text-left",{"line-through":i(a)}]),onClick:r[3]||(r[3]=c=>v(a)?a.value=!i(a):a=!i(a)),textContent:b(e.todo.content)},null,10,_e)])])])]))}});const he={class:""},ge=["textContent"],xe=S({__name:"Tasks",props:{date:null,todos:null},setup(e){let t=g(!0);return(u,a)=>(_(),x(C,null,[s("div",he,[s("div",{class:"flex justify-center cursor-pointer mt-8 p-2 bg-white border-b border-gray-300 text-gray-400 relative",onClick:a[0]||(a[0]=o=>v(t)?t.value=!i(t):t=!i(t))},[s("span",{textContent:b(e.date)},null,8,ge),s("div",{role:"button",class:$(["-ml-2 border-2 border-gray-400 board bottom-3 right-2",{"board-grow":!i(t)}])},"...",2)])]),w(O,{name:"slide-fade"},{default:k(()=>[h(s("div",null,[w(V,{name:"list",tag:"ul"},{default:k(()=>[(_(!0),x(C,null,K(e.todos,o=>(_(),M(ye,{key:o.index,todo:{...o},date:e.date},null,8,["todo","date"]))),128))]),_:1})],512),[[N,i(t)]])]),_:1})],64))}});const be=D(xe,[["__scopeId","data-v-d5bf4cb9"]]),E=e=>(H("data-v-7f73c204"),e=e(),Q(),e),we={class:"shadow-md sm:overflow-hidden"},ke={class:"px-4 py-5 bg-white space-y-6 sm:p-6 border border-1 border-gray-100"},Ce={class:"grid grid-cols-3 gap-6"},Te={class:"col-span-3"},$e={class:"mt-1 flex rounded-md shadow-sm"},Se=["onKeypress"],De={class:"w-16 relative bg-red-100 flex"},Le=["onKeypress","value"],Ae=E(()=>s("div",{class:"priority-tile quick-priority"},[s("label",{for:"quick-priority",class:"priority-label"},"\u6025\u4E8B")],-1)),Ie={class:"w-16 relative bg-sky-200 flex"},Ne=["onKeypress","value"],Oe=E(()=>s("div",{class:"priority-tile slow-priority"},[s("label",{for:"slow-priority",class:"priority-label"},"\u7DE9\u8FA6")],-1)),Ke=S({__name:"App",setup(e){const{tasks:t,addTodo:u,todoClearCompleted:a,todoCompleted:o}=ee();let n=g(""),l=g(y.NORMAL);J("toCompleted",o);const d=q(()=>t.value.sort((m,f)=>G(f.date,m.date)));I(()=>t.value,()=>{A("serialize",t.value)},{deep:!0}),F(()=>{const m=A("deserialize");m&&(t.value=m)});function r(){n.value&&u(n.value,l.value),c()}function c(){n.value="",l.value=y.NORMAL}return(m,f)=>(_(),x(C,null,[s("div",we,[s("div",ke,[s("div",Ce,[s("div",Te,[s("div",$e,[s("button",{type:"button",onClick:f[0]||(f[0]=(...p)=>i(a)&&i(a)(...p)),"data-testid":"clear",class:"mr-5 bg-blue-50 py-2 px-3 border border-gray-300 rounded-md shadow-md text-xs leading-4 font-medium text-gray-400 hover:bg-gray-50 hover:shadow-inner"},"\u6E05\u7A7A\u5DF2\u5B8C\u6210"),h(s("input",{type:"text",id:"todo",autofocus:"","onUpdate:modelValue":f[1]||(f[1]=p=>v(n)?n.value=p:n=p),onKeypress:T(r,["enter"]),"data-testid":"content",class:"focus:border-sky-300 rounded-l-md shadow-md flex-1 block w-full sm:text-sm border-gray-300 hover:shadow-inner placeholder-gray-300",placeholder:"do it..."},null,40,Se),[[j,i(n)]]),s("div",De,[h(s("input",{type:"radio",class:"priority-button opacity-0","onUpdate:modelValue":f[2]||(f[2]=p=>v(l)?l.value=p:l=p),onKeypress:T(r,["enter"]),value:i(y).QUICK,name:"radio",id:"quick-priority"},null,40,Le),[[L,i(l)]]),Ae]),s("div",Ie,[h(s("input",{type:"radio",class:"priority-button",name:"radio","onUpdate:modelValue":f[3]||(f[3]=p=>v(l)?l.value=p:l=p),onKeypress:T(r,["enter"]),value:i(y).NORMAL,id:"slow-priority"},null,40,Ne),[[L,i(l)]]),Oe]),s("button",{type:"button",onClick:r,"data-testid":"add",class:"bg-blue-100 py-2 px-3 border border-l-0 border-blue-300 rounded-r-md shadow-md text-sm leading-4 font-semibold text-gray-500 hover:bg-blue-200 hover:shadow-inner"},"\u6DFB\u52A0")])])])])]),(_(!0),x(C,null,K(i(d),p=>(_(),M(be,{date:p.date,todos:p.todos,key:p.date},null,8,["date","todos"]))),128))],64))}});const Me=D(Ke,[["__scopeId","data-v-7f73c204"]]);P(Me).mount("#app");
